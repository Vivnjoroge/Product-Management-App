import{a as e,c as t,i as n,l as r,o as i,r as a,s as o}from"./index-DUhc63Ik.js";const s=r(`products`,{state:()=>({products:[],isLoading:!1,error:null,total:0}),actions:{async fetchProducts({q:e=``,filters:t={}}={}){this.isLoading=!0,this.error=null;try{let n=await o({q:e,filters:t});this.products=n.products,this.total=n.total||this.products.length}catch(e){this.error=e.message||`Failed to load products`}finally{this.isLoading=!1}},async fetchProductById(e){this.isLoading=!0,this.error=null;try{return await i(e)}catch(e){throw this.error=e.message||`Failed to load product`,e}finally{this.isLoading=!1}},async addProduct(e){this.isLoading=!0,this.error=null;let t=a();try{let r=await n(e,t.token);return this.products.unshift(r),this.total+=1,r}catch(e){throw this.error=e.message||`Failed to add product`,e}finally{this.isLoading=!1}},async updateProduct(e,n){this.isLoading=!0,this.error=null;let r=a();try{let i=await t(e,n,r.token),a=this.products.findIndex(e=>e.id===i.id);return a!==-1&&this.products.splice(a,1,i),i}catch(e){throw this.error=e.message||`Failed to update product`,e}finally{this.isLoading=!1}},async deleteProduct(t){this.isLoading=!0,this.error=null;let n=a();try{await e(t,n.token),this.products=this.products.filter(e=>e.id!==Number(t)&&e.id!==t),this.total=Math.max(0,this.total-1)}catch(e){throw this.error=e.message||`Failed to delete product`,e}finally{this.isLoading=!1}}}});export{s as t};