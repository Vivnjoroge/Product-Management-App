import{A as e,C as t,D as n,E as r,I as i,M as a,N as o,P as s,S as ee,T as c,_ as l,b as u,f as d,g as f,h as p,k as te,n as m,p as ne,r as h,s as g,v as re,w as _,y as v}from"./index-HT9axZnk.js";import{t as ie}from"./products-DQdnFmEf.js";var ae={class:`min-h-screen bg-[#f6f7fb] flex font-sans p-0 m-0`},oe={class:`flex-1 px-0 py-0`},se={class:`px-12 pt-12`},ce={class:`flex items-center justify-between mb-8`},le={class:`bg-white rounded-2xl shadow p-6 flex items-center gap-4 mb-8`},ue={class:`flex-1`},de={class:`relative`},fe={class:`relative`},pe=[`value`],y={class:`relative`},b={class:`rounded-2xl bg-white shadow-lg overflow-hidden`},x={class:`min-w-full`},S={key:0},C={class:`px-8 py-6 flex items-center gap-4`},w=[`src`],T={class:`font-semibold text-gray-900`},E={class:`text-sm text-[#7c7ea4]`},D={class:`px-8 py-6`},O={class:`px-8 py-6 text-right font-medium text-gray-700`},k={class:`px-8 py-6 text-right`},A={class:`flex items-center gap-2 justify-end`},j={class:`text-sm text-gray-700`},M={class:`px-8 py-6 text-right flex items-center gap-3 justify-end relative`},N=[`onClick`],P={key:0,class:`absolute right-0 top-12 z-10 bg-white rounded-lg shadow-lg py-2 w-36 border`},F=[`onClick`],I=[`onClick`],L=[`onClick`],R={class:`px-8 py-5 text-sm text-[#7c7ea4]`},z={class:`flex justify-end gap-2 mt-8 pb-12`},B=[`disabled`],me=[`disabled`],V=10,he={__name:`Products`,setup(he){let H=m(),U=a(!1),W=a(null),G=a(null);function ge(e){G.value=G.value===e?null:e}function K(){G.value=null}function _e(e){H.push({name:`ProductView`,params:{id:e}})}function ve(e){H.push({name:`AddProduct`,params:{id:e}})}function ye(e){W.value=e,U.value=!0}async function be(){try{await q.deleteProduct(W.value),U.value=!1,W.value=null,await $()}catch(e){alert(e.message||`Failed to delete product`),U.value=!1,W.value=null}}function xe(){U.value=!1,W.value=null}let q=ie();h();let J=a(``),Y=a({category:``,stock:``}),X=a(1),Se=f(()=>{let e=new Set((q.products||[]).map(e=>e.category).filter(Boolean));return Array.from(e).sort()}),Z=f(()=>{let e=q.products||[];if(J.value){let t=J.value.toLowerCase();e=e.filter(e=>String(e.title).toLowerCase().includes(t))}return Y.value.category&&(e=e.filter(e=>e.category===Y.value.category)),Y.value.stock===`in`&&(e=e.filter(e=>e.stock>20)),Y.value.stock===`low`&&(e=e.filter(e=>e.stock>0&&e.stock<=20)),Y.value.stock===`out`&&(e=e.filter(e=>e.stock===0)),e.slice((X.value-1)*V,X.value*V)}),Q=f(()=>{let e=(q.products||[]).length;return Math.max(1,Math.ceil(e/V))});function Ce(){X.value>1&&X.value--}function we(){X.value<Q.value&&X.value++}function Te(e){let t={Electronics:`bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-semibold`,Groceries:`bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-semibold`,Apparel:`bg-pink-100 text-pink-700 px-3 py-1 rounded-full text-xs font-semibold`,default:`bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-semibold`};return t[e]||t.default}function Ee(e){return e===0?`w-3 h-3 rounded-full bg-red-500`:e<=20?`w-3 h-3 rounded-full bg-yellow-400`:`w-3 h-3 rounded-full bg-green-500`}function De(e){return e===0?`Out of Stock`:e<=20?`${e} Low Stock`:`${e} In Stock`}async function $(){J.value=``,Y.value={category:``,stock:``},X.value=1;let e=[],t=0,n=0;do{let r=await g({limit:30,skip:t});e=e.concat(r.products),n=r.total,t+=30}while(e.length<n);q.products=e,q.total=n}return _($),(a,f)=>{let m=n(`Sidebar`),h=n(`router-link`),g=n(`ConfirmModal`);return c(),u(`div`,ae,[t(m,{selected:`Products`}),l(`main`,oe,[l(`div`,se,[l(`div`,ce,[f[4]||=l(`div`,null,[l(`h1`,{class:`text-4xl font-bold text-gray-900 mb-2`},`Products`),l(`p`,{class:`text-lg text-[#7c7ea4]`},`Manage your inventory and view product performance.`)],-1),t(h,{class:`bg-[#000080] hover:bg-[#000066] text-white font-semibold rounded-lg px-6 py-3 flex items-center gap-2 shadow transition`,to:{name:`AddProduct`}},{default:te(()=>[...f[3]||=[l(`svg`,{class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{d:`M12 5v14m7-7H5`,stroke:`#fff`,"stroke-width":`2`})],-1),ee(` Add New Product `,-1)]]),_:1})]),l(`div`,le,[l(`div`,ue,[l(`div`,de,[e(l(`input`,{"onUpdate:modelValue":f[0]||=e=>J.value=e,placeholder:`Search by product name...`,class:`w-full rounded-xl border border-gray-200 px-5 py-4 pl-12 text-base focus:outline-none focus:ring-2 focus:ring-[#000080] bg-white shadow-sm`},null,512),[[ne,J.value,void 0,{trim:!0}]]),f[5]||=l(`span`,{class:`absolute left-4 top-1/2 -translate-y-1/2 text-gray-400`},[l(`svg`,{class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`circle`,{cx:`11`,cy:`11`,r:`8`,stroke:`#a1a1aa`,"stroke-width":`2`}),l(`path`,{d:`M21 21l-4.35-4.35`,stroke:`#a1a1aa`,"stroke-width":`2`})])],-1)])]),l(`div`,fe,[e(l(`select`,{"onUpdate:modelValue":f[1]||=e=>Y.value.category=e,class:`rounded-xl border border-gray-200 px-5 py-4 text-base bg-white shadow-sm pr-10 appearance-none min-w-[180px]`},[f[6]||=l(`option`,{value:``},`Category`,-1),(c(!0),u(p,null,r(Se.value,e=>(c(),u(`option`,{key:e,value:e},i(e),9,pe))),128))],512),[[d,Y.value.category]]),f[7]||=l(`span`,{class:`absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none`},[l(`svg`,{class:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{d:`M6 9l6 6 6-6`,stroke:`#a1a1aa`,"stroke-width":`2`})])],-1)]),l(`div`,y,[e(l(`select`,{"onUpdate:modelValue":f[2]||=e=>Y.value.stock=e,class:`rounded-xl border border-gray-200 px-5 py-4 text-base bg-white shadow-sm pr-10 appearance-none min-w-[180px]`},[...f[8]||=[l(`option`,{value:``},`Stock Status`,-1),l(`option`,{value:`in`},`In Stock`,-1),l(`option`,{value:`low`},`Low Stock`,-1),l(`option`,{value:`out`},`Out of Stock`,-1)]],512),[[d,Y.value.stock]]),f[9]||=l(`span`,{class:`absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none`},[l(`svg`,{class:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{d:`M6 9l6 6 6-6`,stroke:`#a1a1aa`,"stroke-width":`2`})])],-1)])]),l(`div`,b,[l(`table`,x,[f[12]||=l(`thead`,{class:`bg-[#f6f7fb]`},[l(`tr`,null,[l(`th`,{class:`px-8 py-5 text-left text-base font-semibold text-gray-500`},`Product`),l(`th`,{class:`px-8 py-5 text-left text-base font-semibold text-gray-500`},`Category`),l(`th`,{class:`px-8 py-5 text-right text-base font-semibold text-gray-500`},`Price`),l(`th`,{class:`px-8 py-5 text-right text-base font-semibold text-gray-500`},`Stock`),l(`th`,{class:`px-8 py-5`})])],-1),l(`tbody`,null,[Z.value.length===0?(c(),u(`tr`,S,[...f[10]||=[l(`td`,{colspan:`5`,class:`px-8 py-10 text-center text-gray-400 text-lg`},`No products found.`,-1)]])):v(``,!0),(c(!0),u(p,null,r(Z.value,e=>(c(),u(`tr`,{key:e.id,class:`border-b last:border-b-0 hover:bg-[#f6f7fb] transition`},[l(`td`,C,[l(`img`,{src:e.thumbnail||e.images?.[0],alt:`thumb`,class:`w-12 h-12 rounded-full object-cover border`},null,8,w),l(`div`,null,[l(`div`,T,i(e.title),1),l(`div`,E,i(e.description),1)])]),l(`td`,D,[l(`span`,{class:s(Te(e.category))},i(e.category),3)]),l(`td`,O,`$`+i(e.price.toFixed(2)),1),l(`td`,k,[l(`span`,A,[l(`span`,{class:s(Ee(e.stock))},null,2),l(`span`,j,i(De(e.stock)),1)])]),l(`td`,M,[l(`button`,{onClick:t=>ge(e.id),class:`text-gray-400 hover:text-indigo-700 focus:outline-none`},[...f[11]||=[l(`svg`,{class:`w-6 h-6`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`circle`,{cx:`12`,cy:`12`,r:`1.5`}),l(`circle`,{cx:`19`,cy:`12`,r:`1.5`}),l(`circle`,{cx:`5`,cy:`12`,r:`1.5`})],-1)]],8,N),G.value===e.id?(c(),u(`div`,P,[l(`button`,{onClick:t=>{_e(e.id),K()},class:`block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100`},`View`,8,F),l(`button`,{onClick:t=>{ve(e.id),K()},class:`block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100`},`Edit`,8,I),l(`button`,{onClick:t=>{ye(e.id),K()},class:`block w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100`},`Delete`,8,L)])):v(``,!0)])]))),128))])]),l(`div`,R,`Showing `+i((X.value-1)*V+1)+` to `+i(Math.min(X.value*V,o(q).total))+` of `+i(o(q).total)+` results`,1)]),l(`div`,z,[l(`button`,{class:`rounded-xl border px-4 py-2 bg-white text-gray-500 hover:bg-[#f6f7fb]`,disabled:X.value===1,onClick:Ce},[...f[13]||=[l(`svg`,{class:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{d:`M15 19l-7-7 7-7`,stroke:`#000080`,"stroke-width":`2`})],-1)]],8,B),l(`button`,{class:`rounded-xl border px-4 py-2 bg-white text-gray-500 hover:bg-[#f6f7fb]`,disabled:X.value===Q.value,onClick:we},[...f[14]||=[l(`svg`,{class:`w-4 h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[l(`path`,{d:`M9 5l7 7-7 7`,stroke:`#000080`,"stroke-width":`2`})],-1)]],8,me)])])]),U.value?(c(),re(g,{key:0,title:`Delete product`,message:`Are you sure you want to delete this product?`,onConfirm:be,onCancel:xe})):v(``,!0)])}}};export{he as default};